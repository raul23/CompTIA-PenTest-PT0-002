==============================
CompTIA PenTest+: Exam PT0-002
==============================
Resources for CompTIA PenTest+ (PT0-002) and related topics

`PenTest+`_ is an intermediate-level certification focusing on penetration testing (aka *ethical hacking*). [1]_ 
PenTest+ covers risk analysis, threat detection, and penetration testing and ethical hacking tools and methodologies.

.. contents:: **Contents**
   :depth: 3
   :local:
   :backlinks: top

Four major phases of penetration testing process
================================================
1. Planning and scoping
2. Information gathering and vulnerability identication
3. Attacks and exploits
4. Reporting and communication

Exam Details (PT0-002)
======================
- **Exam Code:** PT0-002
- **Launch Date:** October 28, 2021
- **Number of questions:** 85
- **Length of test:** 165 minutes
- **Passing score:** 750 on a scale of 100-900
- **Type of Questions:** Multiple choice and `performance-based questions`_ (PBQs)
- **Recommended experience:** 

  - CompTIA Network+, Security+ or equivalent knowledge. 
  - Minimum of 3-4 years of hands-on information security or related experience.
- **Languages:** English, Japanese
- **Retirement:** Usually three years after launch

`:information_source:` `Try a sample PBQs`_

|

`:warning:` **Launch and expiration dates of the PT0-001 and PT0-002 exams**

 - **PT0-001** was released on July 31, 2018 and the English and Japanese versions already expired on April 26, 2022
   and January 31, 2023, respectively.
 - **PT0-002** was released on October 28, 2021. Usually the CompTIA certifications expire three years after launch.
   Thus probably around October 28, 2024, PT0-002 will expire.

**Ref.:** [2]_

Books
=====
- Linn, Heather. `CompTIA PenTest+ Certification_ All-in-One Exam Guide (Exam PT0-002)`_. 2nd ed., McGraw-Hill, 2022.

.. 4.6, 20

- Clarke, Glen E. `CompTIA Pentest+ Certification For Dummies`_. 2nd ed., 2022.

.. 4.4, 7

Related certifications
======================
- **EC-Council Certified Ethical Hacker) (CEH)**

  * `Official website <https://www.eccouncil.org/programs/certified-ethical-hacker-ceh/>`_
  * `Certified Ethical Hacker (CEH)`_ (Wikipedia)
- **GIAC Penetration Tester (GPEN)**

  * `Official website <https://www.giac.org/certifications/penetration-tester-gpen/>`_
  * `Global Information Assurance Certification (GIAC)`_ (Wikipedia)
- **Offensive Security Certified Professional (OSCP)**

  * `Official website <https://www.offensive-security.com/courses/pen-200/>`_
  * `Offensive Security Certified Professional (OSCP)`_ (Wikipedia)
  
|

**Comparisons between related certifications:**

.. image:: ./images/comparisons.png
   :target: ./images/comparisons.png
   :align: left
   :alt: Comparisons between related certifications

Image taken from `comptia.org`_

Videos
======
* `"CompTIA PenTest+\: Everything you need to know about the exam | Infosec Edge Webcast" (Infosec)`_. YouTube, Dec 9, 2021.

   Join Patrick Lane, Director of Products at CompTIA, to get the inside scoop on the latest PenTest+ changes
   
  * Total Running Time: 57 minutes

* `"CompTIA PenTest+ Full Course - FREE [11 Hours] PT0-002" (Paul Browning)`_. YouTube, Jan 9, 2023.

  * Total Running Time: 11 hours 32 minutes

  |

   A complete course featuring theory and follow-along labs.
  
   00:00:00 - The CompTIA Pentest+ Exam
   00:11:27 - Pentesting

   **Module 2 - Planning and Scoping**

   00:37:20 - Explain the Importance of Planning for an Engagement.
   01:28:06 - Explain Key Legal Concepts

   **Module 3 - Information Gathering**

   01:48:55 - Passive Information Gathering, Reconnaissance and Enumeration
   02:07:52 - Passive Information Gathering Tools
   02:29:31 - Reconnaissance Tools

   **Module 4 - Vulnerability Scanning**

   03:04:28 - Vulnerability Management
   03:22:14 - Vulnerability Scan Tools

   **Module 5 - Vulnerability Analysis**

   04:11:19 - Interpreting Vulnerabilities Reports

   **Module 6 - Exploits**

   04:55:40 - Exploit Types
   05:20:37 - Metasploitable and Exploits DBs
   05:32:37 - The Metasploit Framework

   **Module 7 - Exploiting Networks**

   05:54:22 - Network Exploits
   06:27:42 - NetBIOS Exploits
   06:38:58 - Wireless Exploits
   06:50:38 - Some Network Exploitation Tools

   **Module 8 - Exploiting People**

   07:15:41 - Social Engineering
   07:34:00 - Social Engineering Toolkit

   **Module 9 - Exploiting Applications**

   07:49:27 - Exploiting Applications
   08:24:18 - Injection Tools

   **Module 10 - Exploiting Hosts**

   08:41:13 - Special Permission Bits in Linux
   09:08:11 - Exploiting Windows Hashes and Kernel
   09:35:27 - Exploiting Linux Kernels

   **Module 11 - Using and Writing Pentesting Scripts**

   10:02:15 - Scripting in Bash, Powershell, Python and Ruby

   **Module 12 - Reporting**

   10:53:21 - Reporting and Monitoring

.. URLs videos
.. _"CompTIA PenTest+\: Everything you need to know about the exam | Infosec Edge Webcast" (Infosec): https://www.youtube.com/watch?v=P_D7BCpxkS4
.. _"CompTIA PenTest+ Full Course - FREE [11 Hours] PT0-002" (Paul Browning): https://www.youtube.com/watch?v=WczBlBjoQeI

Commands
========
``hashdump``
------------
``hashdump``: **Meterpreter** command for retrieving password hashes from a target

.. code-block::

     meterpreter > run hashdump

     [*] Obtaining the boot key...
     [*] Calculating the hboot key using SYSKEY 8528c78df7ff55040196a9b670f114b6...
     [*] Obtaining the user list and keys...
     [*] Decrypting user keys...
     [*] Dumping password hashes...
     
`:information_source:` References  

   - `offensive-security.com/metasploit-unleashed/meterpreter-basics <https://www.offensive-security.com/metasploit-unleashed/meterpreter-basics/>`_
   - `docs.rapid7.com/metasploit/manage-meterpreter-and-shell-sessions <https://docs.rapid7.com/metasploit/manage-meterpreter-and-shell-sessions/>`_
   - `en.wikibooks.org/wiki/Metasploit/MeterpreterClient#use <https://en.wikibooks.org/wiki/Metasploit/MeterpreterClient#use>`_
   - `oreilly.com/library/view/metasploit-revealed-secrets 
     <https://www.oreilly.com/library/view/metasploit-revealed-secrets/9781788624596/e1d79ad3-0ba0-41e4-9082-9590cfa0089e.xhtml>`_

Tools
=====
Kali Tools
----------
``aireplay-ng``
"""""""""""""""
`aireplay-ng <https://www.kali.org/tools/aircrack-ng/#aireplay-ng>`_ injects packets into a wireless network to generate traffic

.. code-block::

     root@kali:~# aireplay-ng --help

     Aireplay-ng 1.7  - (C) 2006-2022 Thomas d'Otreppe
     https://www.aircrack-ng.org

     usage: aireplay-ng <options> <replay interface>

``arpspoof``
""""""""""""
`arpspoof <https://www.kali.org/tools/dsniff/#arpspoof>`_ intercepts packets on a switched LAN

.. code-block::

   root@kali:~# arpspoof --help
   arpspoof: invalid option -- '-'
   Version: 2.4
   Usage: arpspoof [-i interface] [-c own|host|both] [-t target] [-r] host

``hashcat``
"""""""""""
`hashcat`_ is an advanced CPU-based password recovery utility (see also `kali.org/tools/hashcat <https://www.kali.org/tools/hashcat/>`_)

.. code-block::

     root@kali:~# hashcat -h
     hashcat (v6.2.6) starting in help mode

     Usage: hashcat [options]... hash|hashfile|hccapxfile [dictionary|mask|directory]...

``hydra``
"""""""""
`hydra`_ is a parallelized login cracker which supports numerous protocols to attack (see also `kali.org/tools/hydra <https://www.kali.org/tools/hydra/>`_)

.. code-block::

   root@kali:~# hydra -h
   Hydra v9.4 (c) 2022 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

   Syntax: hydra [[[-l LOGIN|-L FILE] [-p PASS|-P FILE]] | [-C FILE]] [-e nsr] [-o FILE] [-t TASKS] [-M FILE [-T TASKS]] [-w TIME] [-W TIME] [-f] [-s PORT] [-x MIN:MAX:CHARSET] [-c TIME] [-ISOuvVd46] [-m MODULE_OPT] [service://server[:PORT][/OPT]]

   Hydra is a tool to guess/crack valid login/password pairs.
   Licensed under AGPL v3.0. The newest version is always available at;
   https://github.com/vanhauser-thc/thc-hydra
   Please don't use in military or secret service organizations, or for illegal
   purposes. (This is a wish and non-binding - most such people do not care about
   laws and ethics anyway - and tell themselves they are one of the good ones.)
   These services were not compiled in: afp ncp oracle sapr3 smb2.

   Use HYDRA_PROXY_HTTP or HYDRA_PROXY environment variables for a proxy setup.
   E.g. % export HYDRA_PROXY=socks5://l:p@127.0.0.1:9150 (or: socks4:// connect://)
        % export HYDRA_PROXY=connect_and_socks_proxylist.txt  (up to 64 entries)
        % export HYDRA_PROXY_HTTP=http://login:pass@proxy:8080
        % export HYDRA_PROXY_HTTP=proxylist.txt  (up to 64 entries)

   Examples:
     hydra -l user -P passlist.txt ftp://192.168.0.1
     hydra -L userlist.txt -p defaultpw imap://192.168.0.1/PLAIN
     hydra -C defaults.txt -6 pop3s://[2001:db8::1]:143/TLS:DIGEST-MD5
     hydra -l admin -p password ftp://[192.168.0.0/24]/
     hydra -L logins.txt -P pws.txt -M targets.txt ssh

``maltego``
"""""""""""
`maltego <https://www.maltego.com/>`_ is an open source intelligence and forensics application.

.. code-block::

   root@kali:~# maltego -h
   ./../platform/lib/nbexec: WARNING: environment variable DISPLAY is not set
   Module reload options:
     --reload /path/to/module.jar  install or reinstall a module JAR file

   Additional module options:
     -o, --open <arg1>...<argN> 
     -p, --automationPort <arg> 
     -m, --machine <arg>        
     -i, --import <arg>         
     -h, --hub <arg>            
     -s, --serverHttpAllowed    
     -u, --updates <arg>  

``nikto``
"""""""""
`nikto <https://github.com/sullo/nikto>`_ is a web server vulnerability scanner (see also `kali.org/tools/nikto <https://www.kali.org/tools/nikto/>`_)

.. code-block::

     root@kali:~# nikto -h

       -config+            Use this config file
       -Display+           Turn on/off display outputs
       -dbcheck            check database and other key files for syntax errors
       -Format+            save file (-o) format
       -Help               Extended help information
       -host+              target host/URL
       -id+                Host authentication to use, format is id:pass or id:pass:realm
       -list-plugins       List all available plugins
       -output+            Write output to this file
       -nossl              Disables using SSL
       -no404              Disables 404 checks
       -Plugins+           List of plugins to run (default: ALL)
       -port+              Port to use (default 80)
       -root+              Prepend root value to all requests, format is /directory
       -ssl                Force ssl mode on port
       -Tuning+            Scan tuning
       -timeout+           Timeout for requests (default 10 seconds)
       -update             Update databases and plugins from CIRT.net
       -Version            Print plugin and database versions
       -vhost+             Virtual host (for Host header)
         + requires a value

``reaver``
""""""""""
`reaver <https://github.com/t6x/reaver-wps-fork-t6x>`_ performs a brute force attack against an access point’s WiFi Protected Setup pin number (see also `kali.org/tools/reaver <https://www.kali.org/tools/reaver/>`_)
  
.. code-block::

   root@kali:~# reaver -h

   Reaver v1.6.6 WiFi Protected Setup Attack Tool
   Copyright (c) 2011, Tactical Network Solutions, Craig Heffner <cheffner@tacnetsol.com>

   Required Arguments:
      -i, --interface=<wlan>          Name of the monitor-mode interface to use
      -b, --bssid=<mac>               BSSID of the target AP

   Optional Arguments:
      -m, --mac=<mac>                 MAC of the host system
      -e, --essid=<ssid>              ESSID of the target AP
      -c, --channel=<channel>         Set the 802.11 channel for the interface (implies -f)
      -s, --session=<file>            Restore a previous session file
      -C, --exec=<command>            Execute the supplied command upon successful pin recovery
      -f, --fixed                     Disable channel hopping
      -5, --5ghz                      Use 5GHz 802.11 channels
      -v, --verbose                   Display non-critical warnings (-vv or -vvv for more)
      -q, --quiet                     Only display critical messages
      -h, --help                      Show help

   Advanced Options:
      -p, --pin=<wps pin>             Use the specified pin (may be arbitrary string or 4/8 digit WPS pin)
      -d, --delay=<seconds>           Set the delay between pin attempts [1]
      -l, --lock-delay=<seconds>      Set the time to wait if the AP locks WPS pin attempts [60]
      -g, --max-attempts=<num>        Quit after num pin attempts
      -x, --fail-wait=<seconds>       Set the time to sleep after 10 unexpected failures [0]
      -r, --recurring-delay=<x:y>     Sleep for y seconds every x pin attempts
      -t, --timeout=<seconds>         Set the receive timeout period [10]
      -T, --m57-timeout=<seconds>     Set the M5/M7 timeout period [0.40]
      -A, --no-associate              Do not associate with the AP (association must be done by another application)
      -N, --no-nacks                  Do not send NACK messages when out of order packets are received
      -S, --dh-small                  Use small DH keys to improve crack speed
      -L, --ignore-locks              Ignore locked state reported by the target AP
      -E, --eap-terminate             Terminate each WPS session with an EAP FAIL packet
      -J, --timeout-is-nack           Treat timeout as NACK (DIR-300/320)
      -F, --ignore-fcs                Ignore frame checksum errors
      -w, --win7                      Mimic a Windows 7 registrar [False]
      -K, --pixie-dust                Run pixiedust attack
      -Z                              Run pixiedust attack
      -O, --output-file=<filename>    Write packets of interest into pcap file

   Example:
      reaver -i wlan0mon -b 00:90:4C:C1:AC:21 -vv

``recon-ng``
""""""""""""
`recon-ng <https://www.kali.org/tools/recon-ng/>`_ is an Open Source Intelligence gathering tool (see also `kali.org/tools/recon-ng <https://www.kali.org/tools/recon-ng/>`_)

.. code-block::

   root@kali:~# recon-ng -h
   usage: recon-ng [-h] [-w workspace] [-r filename] [--no-version]
                   [--no-analytics] [--no-marketplace] [--stealth] [--accessible]
                   [--version]

   recon-ng - Tim Tomes (@lanmaster53)

Others
------
Nessus
""""""
`Nessus <https://www.tenable.com/products/nessus>`_ is a proprietary vulnerability scanner developed by Tenable, Inc. (see also `en.wikipedia.org/wiki/Nessus_(software) <https://en.wikipedia.org/wiki/Nessus_(software)>`_)

OpenVAS
"""""""
`OpenVAS <https://www.openvas.org/>`_ is a full-featured vulnerability scanner. It is a free software (GPL license).

Terminology
===========
- **Blue team**
- **Red team**

Websites
========
- Official website: `CompTIA PenTest+ Certification`_
- **Wikipedia articles**
  
  * `CompTIA`_
- **Kali Linux**

  - `Get Kali Linux`_: Installer images or Virtual Machines (e.g. VirtualBox)
  - `Kali Tools <https://www.kali.org/tools/>`_
- `OWASP Top Ten <https://owasp.org/www-project-top-ten/>`_

  .. image:: ./images/owasp.png
     :target: ./images/owasp.png
     :align: left
     :alt: OWASP Top Ten

References
==========
.. [1] https://en.wikipedia.org/wiki/CompTIA#Professional_level_certifications
.. [2] https://www.comptia.org/certifications/pentest

.. URLs
.. _PenTest+: https://www.comptia.org/certifications/pentest
.. _Get Kali Linux: https://www.kali.org/get-kali/#kali-platforms

.. URLs test details
.. _comptia.org: https://www.comptia.org/certifications/pentest#examdetails
.. _performance-based questions: https://www.comptia.org/testing/testing-options/about-comptia-performance-exams/performance-based-questions-explained
.. _Try a sample PBQs: https://simulation.comptia.org/

.. URLs books
.. _CompTIA PenTest+ Certification_ All-in-One Exam Guide (Exam PT0-002): 
   https://www.amazon.com/CompTIA-PenTest-Certification-Second-PT0-002/dp/1264274890
.. _CompTIA Pentest+ Certification For Dummies: https://www.amazon.com/CompTIA-Pentest-Certification-Dummies-Computer/dp/1119867274

.. URLs Related certifications
.. _Certified Ethical Hacker (CEH): https://en.wikipedia.org/wiki/Certified_Ethical_Hacker
.. _Global Information Assurance Certification (GIAC): https://en.wikipedia.org/wiki/Global_Information_Assurance_Certification
.. _Offensive Security Certified Professional (OSCP): https://en.wikipedia.org/wiki/Offensive_Security_Certified_Professional

.. URLs tools
.. _Hashcat: https://hashcat.net/hashcat/
.. _Hydra: https://github.com/vanhauser-thc/thc-hydra

.. URLs websites
.. _CompTIA: https://en.wikipedia.org/wiki/CompTIA
.. _CompTIA PenTest+ Certification: https://www.comptia.org/certifications/pentest
